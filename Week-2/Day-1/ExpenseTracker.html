<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
</head>
<body>

<h2>Expense Tracker</h2>

Title: <input type="text" id="title"><br><br>
Amount: <input type="number" id="amount"><br><br>
Date: <input type="date" id="date"><br><br>

<button onclick="addExpense()">Add</button>
<button onclick="viewExpenses()">View</button>

<hr>

<div id="result"></div>

<script>

var db;

var request = indexedDB.open("MyExpenseDB", 1);

request.onupgradeneeded = function(event) {
    db = event.target.result;
    db.createObjectStore("expenses", { keyPath: "id", autoIncrement: true });
};

request.onsuccess = function(event) {
    db = event.target.result;
};

request.onerror = function() {
    alert("Database Error");
};

function addExpense() {

    var transaction = db.transaction(["expenses"], "readwrite");
    var store = transaction.objectStore("expenses");

    var data = {
        title: document.getElementById("title").value,
        amount: document.getElementById("amount").value,
        date: document.getElementById("date").value
    };

    store.add(data);

    alert("Added Successfully");
}

function viewExpenses() {

    var transaction = db.transaction(["expenses"], "readonly");
    var store = transaction.objectStore("expenses");

    var request = store.openCursor();
    var output = "";

    request.onsuccess = function(event) {
        var cursor = event.target.result;

        if (cursor) {
            output += cursor.value.title + " - " +
                      cursor.value.amount + " - " +
                      cursor.value.date +
                      " <button onclick='deleteExpense(" + cursor.value.id + ")'>Delete</button><br>";
            cursor.continue();
        } else {
            document.getElementById("result").innerHTML = output;
        }
    };
}

function deleteExpense(id) {

    var transaction = db.transaction(["expenses"], "readwrite");
    var store = transaction.objectStore("expenses");

    store.delete(id);

    alert("Deleted");
    viewExpenses();
}

</script>

</body>
</html>